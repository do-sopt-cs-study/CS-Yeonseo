# 📚 프로세스 주소 공간: 코드, 데이터, 스택 영역의 관리

<br/>

## 🌟 프로세스 주소 공간

![Untitled (11)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/ed24f954-c90d-48a9-addc-16aed04b6d0a)

프로세스의 주소 공간은 크게 Stack, Heap, Data, Text(Code) 영역으로 나누어 볼 수 있다.

### 🤔 구역을 나누는 이유?

- 최대한 데이터를 공유하여 메모리 사용량을 줄여야 하기 때문.
- Code는 같은 프로그램 자체에서는 모두 같은 내용이기 때문에 따로 관리하여 공유한다.
- Stack과 데이터를 나눈 이유는, 스택 구조의 특성과 전역 변수의 활용성을 위함이다.

### 1. Stack 영역

- 함수의 호출과 관계되는 **지역 변수와 매개 변수가 저장되는 영역**
- Stack 영역의 값은 함수 호출과 함께 할당 되며, 함수 호출이 완료되면 소멸 된다.
- 메모리의 높은 주소에서 낮은 주소의 방향으로 할당된다.
- 재귀 함수가 너무 깊게 호출되거나 함수가 지역 변수를 너무 많이 가지고 있어 Stack 영역을 초과하면 Stack overflow 에러가 발생한다.

### 2. Heap 영역

- **런타임에 크기가 결정되는 영역.**
- 사용자에 의해 공간이 동적으로 할당 및 해제된다.
- 주로 참조형 데이터 (ex. 클래스) 등의 데이터가 할당 된다.
- 메모리의 낮은 주소에서 높은 주소의 방향으로 할당 된다.

### 3. Data 영역

- 전역 변수나 Static 변수 등 프로그램이 사용할 수 있는 데이터를 저장하는 영역
- 어떤 프로그램에 전역/static 변수를 참조하는 코드가 존재한다면, 이 프로그램은 컴파일 된 후에 data 영역을 참조하게 된다.
- 프로그램의 시작과 함께 할당되며, 프로그램이 종료되면 소멸한다.
  → 단, *초기화 되지 않은* 변수가 존재한다면, 이는 BSS 영역에 저장된다.

### 4. **Text (Code) 영역**

- 프로그램이 실행될 수 있도록 CPU가 해석 가능한 기계어 코드가 저장되어 있는 공간
- 프로그램이 수정되면 안 되므로 ReadOnly 상태로 저장 되어있다.
