# 📚 CPU 스케줄링: 프로세스 실행 순서 결정 기법

## 🌟 CPU 스케줄링이란?

### 1. CPU 스케줄링의 정의

- 프로세스들의 우선순위와 요구사항에 따라 CPU 자원을 할당하는 방법
- 다중 프로그램 운영체제의 기본으로, 운영체제가 CPU를 효율적으로 활용하기 위한 방법
- CPU 스케줄러가 Ready 상태의 프로세스 중 어떤 프로세스에게 CPU를 할당할지 결정하는 과정으로, Dispatcher에 의해 선택된 프로세스에 CPU가 할당된다.
  → 여러 프로세스들 중에서 어떤 프로세스를 먼저 실행할지, 얼마나 오랫동안 실행할지 등을 결정하는 일련의 과정
- CPU 스케줄링을 통해 시스템 성능을 높이고, 시스템 자원을 효율적으로 사용하며, 다양한 작업을 보다 빠르게 처리할 수 있다.

### 2. CPU 스케줄링의 구분

CPU 스케줄링은 규모에 따라 장기, 중기, 단기 스케줄링으로 구분된다.

`(1) 장기 스케줄링 (Long-term Scheduler)`

- 시스템에 새로운 프로세스가 들어올 때, 어떤 프로세스를 메모리에 올릴 것인지 결정하는 단계.
  → new 상태의 프로세스를 admitted 하는 작업을 한다.
- 즉, 장기 스케줄링의 결정에 따라 시스템 내의 프로세스 총 개수(degree of multiprogramming)가 정해진다.
- 프로세스의 수행 시간, 우선순위, 입출력 요구 등을 고려하여 결정된다.

`(2) 중기 스케줄링 (Medium-term Scheduler, Swapper)`

- 메모리에 올라와 있는 프로세스들(이미 활성화가 된 프로세스) 중 어떤 프로세스를 디스크에Swap Out 시킬 것인지 결정하는 단계
- 즉, 시스템의 과부화를 막기 위해 활성화 된 프로세스들의 중지 여부를 결정하여 활성화된 프로세스 수를 조절한다.
- 메모리 부족 상황 등에서 필요
- 프로세스들의 입출력 요구를 고려하여 결정된다.

`(3) 단기 스케줄링 (Short-term Scheduler, CPU Scheduler)`

- CPU를 할당받기 위해 대기 중인 프로세스들 중에서 어떤 프로세스를 선택하여 CPU를 할당할 것인지 결정하는 단계
- 단기 스케줄러가 어떤 기준(어떤 스케줄링 알고리즘)에 따라 프로세스를 선택하고, 어느 정도 자원을 배분할지에 따라 시스템에 큰 영향을 끼친다.
- 프로세스의 우선순위, 수행 시간 등을 고려하여 결정된다.

---

## 🌟 선점형 vs 비선점형 스케줄링

![Untitled (13)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/1e233660-a150-46e4-a60c-7a63b0efb99c)

### 1. `선점형 스케줄링`

- 운영체제가 필요하다고 판단하면 실행 상태에 있는 프로세스의 작업을 중단시키고 새로운 작업을 시작할 수 있다.
- Timeout 상황, I/O interrupt, System Call 등이 발생한 경우 현재 실행 상태에 있는 프로세스의 CPU를 강제로 회수하고 다른 프로세스에게 CPU를 할당해줄 수 있는 스케줄링 방식
- Context Switch(문맥 교환)로 인한 오버헤드가 발생할 수 있다.
- 처리시간 예측이 어렵다.
- 선점형 스케줄링 예시
  - 알고리즘 : Round Robin, Priority Scheduling
  - 프로세스 상태 스케줄링 : Interrupt, I/O or Event Completion, I/O or Event Wait, Exit

### 2. `비선점형 스케줄링`

- 어떤 프로세스가 실행 상태에 들어가면 그 프로세스가 끝나거나 CPU를 자진 반납하는 경우가 아니면 계속 실행되는 것
- Context Switch(문맥 교환)에 의한 오버헤드가 없고 스케줄러도 할 일이 적어져 효율적이며, 처리 시간 예측이 용이하다.
- 하지만 전체 시스템의 처리율이 떨어지게 된다.
- 비선점형 스케줄링 예시
  - 알고리즘 : FCFS(First-Come, First Served), SJF(Shortest Job First)
  - 프로세스 상태 스케줄링 : I/O or Event Wait, Exit

---

## 🌟 스케줄링 기준(척도)

서로 다른 CPU 스케줄링 알고리즘을 비교하기 위한 기준은 다음을 포함한다.

![Untitled (12)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/6a6399c1-c02e-4850-85c9-cfa427ffb89e)

1. `대기시간`

- 프로세스가 생성된 후 실행되기 전까지 대기하는 시간

1. `평균 대기 시간`

- 모든 프로세스의 대기 시간을 합한 뒤 프로세스의 수로 나눈 값

1. `응답 시간`

- 첫 작업을 시작한 후 첫번째 출력(반응)이 나오기 전까지 시간

1. `실행 시간`

- 프로세스 작업이 시작된 후 종료되기까지의 시간

1. `반환 시간`

- 대기 시간을 포함하여 실행이 종료될 때까지으 ㅣ시간

---

## 🌟 스케줄링 알고리즘

### 1. 선점형 스케줄링 알고리즘

### (1) `우선순위 스케줄링 : Priority Scheduling`

- 우선순위가 높은 프로세스부터 실행하는 방식
  → 각 프로세스는 우선순위를 가지고 있으며, 높은 우선순위를 가진 프로세스가 먼저 실행된다.
- 우선순위는 정적으로 할당되거나, 동적으로 변화할 수 있다.
- 장점 : 중요한 작업부터 처리하고자 할 때 유용한 방식이다.
- 단점 : 우선순위가 높은 프로세스가 계속해서 들어올 경우, 우선순위가 낮은 프로세스는 계쏙 대기하게 되어 기아 상태가 발생할 수 있다.

### (2) `라운드로빈 스케줄링 : Round Robin Scheduling(RR)`

- 각 프로세스에게 일정한 시간 할당을 해주고, 할당된 시간이 지나면 다음 프로세스에게 CPU를 넘기는 방식
- 이때, 넘겨주는 시간을 할당 시간(Time Quantum)이라고 한다.
  - 할당 시간이 짦으면 : CPU를 빨리 넘겨 줄 수 있지만, Context Switch(문맥 교환)이 자주 발생하여 오버헤드가 커질수 있다.
  - 할당 시간이 길면 : Context Swtich(문맥 교환) 오버헤드는 줄어들지만, 프로세스의 대기 시간이 길어질수 있다.

### 2. 비선점형 스케줄링 알고리즘

### (1) `선입 선처리 스케줄링 : First-Come, First-Served Scheduling(FCFS)`

- 먼저 도착한 프로세스를 먼저 실행하는 방식
- 즉, CPU가 현재 수행중인 작업을 완료하면, 대기중인 프로세스 중에서 가장 먼저 들어온 프로세스를 실행
- 장점 : 구현이 간단하고 공정하다
- 단점
  - 대기 시간이 길어질수 있다.
  - 작업 시간이 긴 프로세스가 먼저 실행될 경우, 평균 대기 시간이 길어질 수 있다.

### (2) `최단 작업 우선 스케줄링 : Short-Job-First Scheduling(SJF)`

- 대기시간이 가장 짧은 작업을 우선적으로 실행하는 방법
- 장점 :
  - 실행시간이 긴 프로세스보다 짧은 프로세스가 먼저 실행되기 때문에 평균 대기 시간이 짧아진다
- 단점 :
  - 작업 시간을 미리 알고 있어야 한다. 작업 시간을 추정하는 것이 어려우면 예측 오류로 인해 평균 대기 시간이 길어질 수 잇다.
  - 작업 시간이 짧은 프로세스가 지속적으로 들어올 경우, 작업 시간이 긴 프로세스는 계속 대기하는 기아 상태가 발생한다.
