# π“ μΈν„°λ½νΈ(Interrupt)μ™€ μ‹μ¤ν… μ½(System Call): μ…μ¶λ ¥ λ° μμ™Έ μ²λ¦¬

## πΒ μΈν„°λ½νΈ(Interrupt)

### 1. μΈν„°λ½νΈλ€?

- ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” λ„μ¤‘μ— μκΈ°μΉ μ•μ€ μƒν™©μ΄ λ°μƒν•  κ²½μ° ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ‘μ—…μ„ μ¦‰μ‹ μ¤‘λ‹¨ν•κ³ , λ°μƒλ μƒν™©μ— λ€ν• μ°μ„  μ²λ¦¬κ°€ ν•„μ”ν•¨μ„ CPUμ—κ² μ•λ¦¬λ” κ²ƒ
- μ§€κΈ μν–‰ μ¤‘μΈ μΌλ³΄λ‹¤ λ” μ¤‘μ”ν• μΌ(ex. μ…μ¶λ ¥, μ°μ„  μμ„ μ—°μ‚° λ“±)μ΄ λ°μƒν•λ©΄ κ·Έ μΌμ„ λ¨Όμ € μ²λ¦¬ν•κ³  λ‚μ„ ν•λ μΌμ„ κ³„μ†ν•΄μ•Ό ν•λ‹¤.

### 2. μΈν„°λ½νΈμ μΆ…λ¥

> **μ™Έ,λ‚΄λ¶€ μΈν„°λ½νΈ**λ” CPUμ ν•λ“μ›¨μ–΄ μ‹ νΈμ— μν•΄ λ°μƒν•λ©° / **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ**λ” λ…λ Ήμ–΄μ μν–‰μ— μν•΄ λ°μƒν•λ‹¤.

- `μ™Έλ¶€ μΈν„°λ½νΈ`
  - μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ° μ¥μΉ, μ „μ› λ“± μ™Έλ¶€μ μΈ μ”μΈμΌλ΅ λ°μƒ
  - _ex. μ „μ› μ΄μƒ, κΈ°κ³„ μ°©μ¤, μ™Έλ¶€ μ‹ νΈ, μ…μ¶λ ¥_
- `λ‚΄λ¶€ μΈν„°λ½νΈ`
  - **Trap**μ΄λΌκ³ λ„ λ¶€λ¥΄λ©°, μλ»λ λ…λ Ήμ΄λ‚ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•  λ• λ°μƒ
  - _ex. 0μΌλ΅ λ‚λ„κΈ°κ°€ λ°μƒ, μ¤λ²„ν”λ΅μ°, λ…λ Ήμ–΄λ¥Ό μλ» μ‚¬μ©ν• κ²½μ°(Exception)_
- `μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ`
  - ν”„λ΅κ·Έλ¨ μ²λ¦¬ μ¤‘ λ…λ Ήμ μ”μ²­μ— μν•΄ λ°μƒν• κ²ƒ (SVC μΈν„°λ½νΈ)
  - μ†ν”„νΈμ›¨μ–΄ μ΄μ© μ¤‘μ— λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ¥Ό μ‹¤ν–‰μ‹ν‚¤λ©΄ μ‹λ¶„ν•  μ²λ¦¬λ¥Ό μ„ν•΄ μμ› ν• λ‹Ή λ™μ‘μ΄ μν–‰λλ‹¤.
  - _ex. μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ μ‹ν‚¬ λ• λ°μƒ_

### 3. μΈν„°λ½νΈμ λ™μ‘ κ³Όμ •

1. `ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘λ‹¨` : ν„μ¬ μ‹¤ν–‰μ¤‘μ΄λ λ…λ Ήμ–΄κΉμ§€ μν–‰ν•λ‹¤.
2. `ν„μ¬μ ν”„λ΅κ·Έλ¨ μƒνƒ λ³΄μ΅΄` : μΈν„°λ½νΈ μΆ…λ£ ν›„ PC(Program Counter)μ κ°’μ„ μ¤νƒμ— μ €μ¥ν•λ‹¤.
3. `μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄ μ‹¤ν–‰` : μΈν„°λ½νΈλ¥Ό μ”μ²­ν• μ¥μΉλ¥Ό μ‹λ³„ν•λ‹¤.
4. `μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR) μ‹¤ν–‰` :
   - ISR μ²λ¦¬ν•κΈ° μ „, ν„μ¬ μν–‰ν•λ μ‘μ—…μ„ μ¤νƒμ— μ €μ¥ν•λ”λ°, μ΄κ²ƒμ„ Contextλ¥Ό μ €μ¥ν•λ‹¤κ³  ν•λ‹¤.
     - Context : ν”„λ΅μ„Έμ¤ μƒνƒμ™€ κ΄€λ ¨λ λ μ§€μ¤ν„°μ μ§‘ν•©
   - μΈν„°λ½νΈ μ›μΈμ„ νμ•…ν•κ³  μ‹¤μ§μ μΈ μ‘μ—…μ„ μν–‰ν•λ‹¤.
   - μ²λ¦¬κΈ° λ μ§€μ¤ν„° μƒνƒλ¥Ό λ³΄μ΅΄ν•λ‹¤.
   - μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰ μ¤‘ μ°μ„  μμ„κ°€ λ” λ†’μ€ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ λ μ¬κ·€μ μΌλ΅ μ„ κ³Όμ •μ„ μν–‰
5. `μƒνƒ λ³µκµ¬` : μΈν„°λ½νΈ λ°μƒ μ‹ μ €μ¥ν•΄λ‘” PC(Program Counter)λ¥Ό λ‹¤μ‹ λ³µκµ¬ν•λ‹¤.
6. `μ¤‘λ‹¨λ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¬κ°` : PCμ κ°’μ„ μ΄μ©ν•μ—¬ μ΄μ „μ— μν–‰μ¤‘μ΄λ ν”„λ΅κ·Έλ¨μ„ μ κ²ν•λ‹¤.

### 4. ν΄λ§ vs μΈν„°λ½νΈ

μ»¨νΈλ΅¤λ¬κ°€ μ…λ ¥μ„ λ°›μ•„λ“¤μ΄λ” λ°©λ²•(μ°μ„ μμ„ νλ³„ λ°©λ²•)μ—λ” ν΄λ§, μΈν„°λ½νΈμ λ‘ κ°€μ§€κ°€ μλ‹¤.

1. `ν΄λ§ λ°©μ‹`
   - μ‚¬μ©μκ°€ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•΄ μ…λ ¥ ν•€μ κ°’μ„ κ³„μ† μ½μ–΄ λ³€ν™”λ¥Ό μ•μ•„λ‚΄λ” λ°©μ‹
   - μΈν„°λ½νΈ μ”μ²­ ν”λκ·Έλ¥Ό μ°¨λ΅€λ΅ λΉ„κµν•μ—¬ μ°μ„ μμ„κ°€ κ°€μ¥ λ†’μ€ μΈν„°λ½νΈ μμ›μ„ μ°Ύμ•„ μ΄μ— λ§λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μν–‰ν•λ‹¤.
   - ν•λ“μ›¨μ–΄μ— λΉ„ν•΄ μ†λ„κ°€ λλ¦¬λ‹¤.
   - ν΄λ§μ„ ν•λ” μ‹κ°„μ—λ” μ»¨νΈλ΅¤λ¬κ°€ νΉμ •ν• μ–΄λ–¤ μΌμ„ ν•  μ‹κΈ°λ¥Ό μ•κΈ° μ„ν•΄ κ³„μ† μ²΄ν¬λ¥Ό ν•΄μ•Ό ν•κ³ , μ›λ ν•λ μΌμ— μ§‘μ¤‘ν•  μκ°€ μ—†κ² λμ–΄ λ§μ€ κΈ°λ¥μ„ μ λ€λ΅ μν–‰ν•μ§€ λ»ν•λ” λ‹¨μ μ΄ μλ‹¤.
2. `μΈν„°λ½νΈ λ°©μ‹`
   - MCU μμ²΄κ°€ ν•λ“μ›¨μ–΄μ μΌλ΅ λ³€ν™”λ¥Ό μ²΄ν¬ν•μ—¬ λ³€ν™” μ‹μ—λ§ μΌμ •ν• λ™μ‘μ„ ν•λ” λ°©μ‹
     β†’ **λ°μƒμ‹κΈ°λ¥Ό μμΈ΅ν•κΈ° νλ“  κ²½μ°μ— μ»¨νΈλ΅¤λ¬κ°€ κ°€μ¥ λΉ λ¥΄κ² λ€μ‘ν•  μ μλ” λ°©λ²•**
   - Daisy Chain
   - λ³‘λ ¬ μ°μ„ μμ„ λ¶€μ—¬
   - μΈν„°λ½νΈ λ°©μ‹μ€ ν•λ“μ›¨μ–΄λ΅ μ§€μ›μ„ λ°›μ•„μ•Ό ν•λ” μ μ•½μ΄ μμ§€λ§, ν΄λ§μ— λΉ„ν•΄ μ‹ μ†ν•κ² λ€μ‘ν•λ” κ²ƒμ΄ κ°€λ¥ν•λ‹¤λ” μ¥μ μ΄ μλ‹¤
     β†’ **μ‹¤μ‹κ°„ λ€μ‘**μ΄ ν•„μ”ν•  λ•λ” ν•„μμ μΈ κΈ°λ¥μ΄λ‹¤.

---

## πΒ μ‹μ¤ν… μ½ (System Call)

![Untitled (10)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/520df7bc-5b88-4dd9-839e-e38ebe6ba78b)

### 1. μ‹μ¤ν… μ½(μ‹μ¤ν… νΈμ¶, system call)μ΄λ€?

- μ΄μμ²΄μ μ μ»¤λ„μ΄ μ κ³µν•λ” μ„λΉ„μ¤μ— λ€ν•΄, **μ‘μ© ν”„λ΅κ·Έλ¨μ μ”μ²­μ— λ”°λΌ μ»¤λ„μ— μ ‘κ·Όν•κΈ° μ„ν• μΈν„°νμ΄μ¤**
- μ©μ ν”„λ΅κ·Έλ¨μ΄ νΉκ¶ λ…λ Ήμ μν–‰μ„ ν•„μ”λ΅ ν•λ” κ²½μ°, μ΄μμ²΄μ μ—κ² νΉκ¶ λ…λ Ήμ λ€ν–‰μ„ μ”μ²­ν•λ” κ²ƒμ΄ μ‹μ¤ν… μ½μ΄λ‹¤.
  - ex.μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ λ””μ¤ν¬ νμΌμ„ μ ‘κ·Όν•κ±°λ‚ κ²°κ³Όλ¥Ό μ¶λ ¥ν•λ” λ“±μ μ‘μ—…μ΄ ν•„μ”ν• κ²½μ°.

### 2. μ‹μ¤ν… μ½μ κΈ°λ¥

1. μ‚¬μ©μ λ¨λ“μ— μλ” μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ»¤λ„μ κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ„λ΅ ν•λ‹¤.
2. μ‹μ¤ν… νΈμ¶μ„ ν•λ©΄ μ‚¬μ©μ λ¨λ“μ—μ„ μ»¤λ„ λ¨λ“λ΅ λ°”λ€λ‹¤.
3. μ»¤λ„μ—μ„ μ‹μ¤ν… νΈμ¶μ μ‘μ—…μ΄ λλ‚λ©΄ μ‚¬μ©μ λ¨λ“λ΅ λμ•„κ°„λ‹¤.

### 3. μ‹μ¤ν… μ½μ΄ ν•„μ”ν• μ΄μ ?

- μ‚¬μ©μκ°€ μ§μ ‘μ μΌλ΅ ν•λ“μ›¨μ–΄ μ¥μΉλ¥Ό μ μ–΄ν•λ‹¤λ©΄ ν° λ¬Έμ κ°€ λ°μƒν•  μ μκΈ° λ•λ¬Έμ΄λ‹¤.
  β†’ λ”°λΌμ„ μ‚¬μ©μ μ–΄ν”λ¦¬μΌ€μ΄μ…μ€ μ‹μ¤ν… μ½μ„ ν†µν•΄ μ§μ ‘μ μΈ ν•λ“μ›¨μ–΄ μ”μ²­μ΄λ‚ μ¤‘μ”ν• μ‹μ¤ν… μ”μ²­μ„ ν•λ‹¤.
- **μ μ €λ λ²¨**μ μ‘μ©ν”„λ΅κ·Έλ¨μ€ μ μ €λ λ²¨μ ν•¨μλ“¤ λ§μΌλ΅λ” λ§μ€ κΈ°λ¥μ„ κµ¬ν„ν•κΈ° νλ“¤κΈ° λ•λ¬Έμ— μ»¤λ„μ λ„μ›€μ„ λ°λ“μ‹ λ°›μ•„μ•Ό ν•λ‹¤.
- **μ»¤λ„μ—** κ΄€λ ¨λ κ²ƒμ€ μ»¤λ„λ¨λ“λ΅ μ „ν™λ ν›„μ—μ•Ό ν•΄λ‹Ή μ‘μ—…μ„ μν–‰ν•  κ¶ν•μ΄ μƒκΈ΄λ‹¤. **μ»¤λ„λ¨λ“**λ¥Ό ν†µν• μ΄λ¬ν• μ‘μ—…μ€ λ°λ“μ‹ μ‹μ¤ν… μ½μ„ ν†µν•΄ μν–‰ν•λ„λ΅ μ„¤κ³„λμ–΄ μλ‹¤

### 4. μ‹μ¤ν… μ½μ μ ν•

(1) `ν”„λ΅μ„Έμ¤ μ»¨νΈλ΅¤`

- ν”„λ΅μ„Έμ¤ μƒμ„± λ° μΆ…λ£
- λ©”λ¨λ¦¬μ— λ΅λ“, μ‹¤ν–‰
- ν”„λ΅μ„Έμ¤ μ†μ„± κ°’ ν™•μΈ, μ§€μ •
- wait μ΄λ²¤νΈ, signal μ΄λ²¤νΈ
- λ©”λ¨λ¦¬ ν• λ‹Ή

β‡’ ex) fork, wait, exec λ“±

(2) `νμΌ λ§¤λ‹μ§€λ¨ΌνΈ`

- νμΌ μƒμ„±, νμΌ μ‚­μ 
- μ—΄κΈ°, λ‹«κΈ°
- μ½κΈ°, μ“°κΈ°, Reposition
- νμΌ μ†μ„± κ°’ ν™•μΈ, μ§€μ •

=> ex) open, read, write, close λ“±

(3) `λ””λ°”μ΄μ¤ λ§¤λ‹μ§€λ¨ΌνΈ`

- λ””λ°”μ΄μ¤ μ”μ²­ λ° ν•΄μ 
- μ½κΈ°, μ“°κΈ°, Reposition
- λ””λ°”μ΄μ¤ μ†μ„± ν™•μΈ, μ§€μ •
- λΉ„ λ¬Όλ¦¬μ μΈ λ””λ°”μ΄μ¤ ν•΄μ  λ° μ¥μ°©

(4) `μ •λ³΄ κ΄€λ¦¬`

- μ‹κ°„ ν™•μΈ, μ‹κ°„ μ§€μ •
- μ‹μ¤ν… λ°μ΄ν„° ν™•μΈ, μ§€μ •
- ν”„λ΅μ„Έμ¤, νμΌ, λ””λ°”μ΄μ¤ μ†μ„± κ°€μ Έμ¤κΈ°
- ν”„λ΅μ„Έμ¤, νμΌ, λ””λ°”μ΄μ¤ μ†μ„± μ„¤μ •ν•κΈ°

(5) `ν†µμ‹ `

- μ»¤λ®¤λ‹μΌ€μ΄μ… μ—°κ²° μƒμ„± λ° μ‚­μ 
- λ©”μ‹μ§€ μ†΅μ‹ , μμ‹ 
- μƒνƒ μ •λ³΄ μ „λ‹¬
- remote λ””λ°”μ΄μ¤ ν•΄μ  λ° μ¥μ°©

(6) `λ³΄μ•`

- Permission νλ“
- Permission μ„¤μ •
