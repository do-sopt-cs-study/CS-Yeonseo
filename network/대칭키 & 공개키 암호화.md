# 📚 대칭키 & 공개키 암호화: 데이터 보호를 위한 키 관리 방법

<br/>

# 🌟 암호화란?

## 정의 및 필요성

- **암호화란 중요한 정보를 읽기 어려운 값으로 변환하여 제 3자가 볼 수 없도록 하는 기술이다.**
- 네트워크로 전송되는 데이터는 노출의 위험이 있으며 도청 혹은 변조가 가능하기 때문에 이를 방지하기 위해 암호화가 필요하다.
- 암호 시스템에서는 key라는 비밀 값을 복잡한 알고리즘과 결합하여 메시지를 암호화하거나 해독한다.

## 관련 용어

- `평문(plainText)` : 암호 기술을 통해 보호하고자 하는 원본 데이터
- `암호문(cipherText)` : 평문에 암호 기술을 적용한 것
- `암호화` : 평문에 암호 기술을 적용하여 암호문으로 변환하는 과정
- `복호화` : 암호문을 평문으로 복원하는 과정
- `암호키` : 평문을 암호화하기 위해 필요한 키, 키가 있어야만 암호문을 복호화 할 수 있음.

## 기능

- `기밀성(Confidentially)` : 허락되지 않은 사용자 또는 객체가 정보의 내용을 알 수 없도록 하는 성질
- `무결성 (Integrity)` : 허락되지 않은 사용자 또는 객체가 정보를 함부로 수정할 수 없도록 하는 성질
- `인증(Authentication)` : 사용자 또는 객체의 디지털 정체성을 식별
- `부인 방지(Non-repudiation)` : 정보를 보낸 사람이 나중에 정보를 보냈다는 것을 부인하지 못하도록 하는 성질

## 종류

![Untitled (6)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/21cc9f83-2275-4b5d-843e-244399f9b315)

- `단방향 암호화` : 암호화는 가능하지만, 복호화가 불가능한 암호화 방법.
  - ex. 비밀번호, 인증, 신원 증명
  - **Hash 알고리즘 방법**을 사용한다.
    - ex. MD5, SHA 등
- `양방향 암호화` : 암호문을 평문으로 복호화 할 수 있는 암호화 벙법
  - 암호화와 복호화가 같은 키를 사용하느냐에 따라 **대칭키와 비대칭키(공개키) 방식으로 나뉜다.**
  - 양쪽에서 메시지를 암호화하여 수신 과정에서 스니핑 당해도 해석할 수 있는 위험이 줄어든다.
  - https에서 사용하는 방식이다.

---

# 🌟 대칭키 암호화 방식

> Symmetric Key = Session Key = Secret Key = Shared Key = 대칭키 = 단용키

## 정의

- ❓ `대칭키 암호화 알고리즘 (Symmetric-key Algorithm)`
  - **암호화와 복화화에 같은 암호 키를 사용하는 알고리즘**
  - 암호화 하는 측과 복호화 하는 측이 같은 암호 키를 공유해야 한다.

## 장단점

- 장점
  - 하나의 키를 사용하기 때문에 **구현이 용이**하다.
  - 내부 구조가 간단한 치환과 전치의 조합으로 되어 있어 데이터를 암화하기 위한 **연산 속도가 빠르다.**
    → 대용량 데이터 암호화에 적합하다.
  - **기밀성**을 제공한다.
- 단점
  - 강한 보안을 위해 **키를 주기적으로 교환**해주는 것이 좋다.
  - 대칭 키 전달 과정에서 해킹 위험에 노출될 수 있다.
  - 송,수신자 간 동일한 키를 공유해야 하므로 **사람이 증가할수록 키 관리가 어려워진다.**
  - **무결성 지원이 부분적**으로만 가능하다
  - **부인 방지 기능을 제공하지 못한다.**

## 종류

1. **`블록 암호(Block Cipher) 방식`**

- 기밀성 있는 정보를 정해진 블록 단위로 암호화 하는 대칭키 암호 시스템
- 암호화하려는 정보가 블록 길이보다 길 경우 특정한 운용 모드가 사용된다.
- 블록 암호화 방식 알고리즘 종류
  - SEED
  - HIGHT(HIGH security and light weigHT)
  - ARAIA
  - LEA(Lightweight Encryption Algorithm)
  - DES(Data Encryption Standard)
  - AES(Advanced Encryption Standard)

1. **`스트림 암호(Stream Cipher) 방식`**

- 이진화된 **평문 스트림과 이진 스트림의 배타적 논리합 연산**(`XOR`)으로 암호문을 생성하는 방식
  - `동기식 스트림 암호` : 키스트림이 평문과 관계없이 생성 되어 동기식으로만 사용 되어야 함
  - `자기 동기식 스트림 암호` : 키스트림이 평문 혹은 암호문의 함수관계에 의해 생성되기 때문에 복호화 시 동기가 흐트러졌더라도 스스로 동기화가 이루어져 복호화가 가능
- 스트림 암호화 방식 알고리즘 종류
  - RC4
  - A5/1, A5/2, A5/3

---

# 🌟 공개키 암호화 방식

> Asymmetric Key = Public key = 비대칭키 암호화 **\*\***=**\*\*** 공개키 암호화

## 정의

- ❓ **`공개키 암호화 알고리즘 (Public-key Algorithm)`**
  - **암호화 할 때와 복호화 할 때의 키를 분리**하여 서로 다른 키로 사용하는 암호화 알고리즘
  - 자신이 가지고 있는 고유한 암호키(개인키)로만 복호화할 수 있는 암호키(공개키)를 대중에 공개하는 방식이다.
    - `개인 키(Private Key)` : 외부에 절대 노출되어서는 안되는 키
    - `공개 키(Public Key)` : 공개적으로 개방되어 있는 키
  - 대칭 키 분배 문제를 해결하기 위해 고안되었다.
    - ❓ `대칭 키 분배 문제` :
      대칭 키 일 때는 송수자 간에서만 키를 알아야 한다.
      → 다양한 사람이 대칭키 방식을 사용하게 된다면, 송수신자간 신뢰를 지키기 위해서라도 (다양한 사람들 간) 키가 서로 달라야 한다!
      → 키의 개수가 무한정으로 늘어날 수 있고 늘어난 키의 갯수만큼 관리하기도 힘들어진다.

## 암호화 과정

![Untitled (7)](https://github.com/do-sopt-cs-study/CS-Yeonseo/assets/77691829/13713b1c-d630-4d64-b61d-3e02bf5be7e7)

server/client 구조에서 공개키 암호화 방식를 적용한 방식을 예로 들면,

- `step 1` : cleint에서 공개키/개인키 쌍을 생성하고, 공개키는 공개(등록)하고 개인키는 본인이 소유한다.
- `step 2` : server가 client의 공개키를 받아와 공개키를 사용해 데이터(평문)를 암호화하고, 암호화 된 데이터를 client에 전송한다.
- `step 3` : client는 server로부터 전달 받은 암호화 된 데이터를 client가 가진 개인키로 복호화한다.

## 장단점

- 장점

  - **키 분배 및 키 관리가 용이**하다
  - **기밀성, 무결성, 부인방지 기능**을 제공한다.

    - _어떻게 공개키 암호화로 부인 방지 기능을 제공할까?_

      `❓부인 방지 기능 예시`

      - 예를 들어 A 가 B 에게 돈을 빌린 후 '차용증'에 서명했는데, 후에 A 는 돈을 빌리지 않았으며 차용증 역시 자신의 서명이 아니라고 부인 하는 경우를 생각해 볼 수 있다.
        → 이 때, B 는 문서에 있는 서명이 A 의 것이 맞다는 것을 확인하는 것이 '부인 방지'이다.

        `❓공개키 암호화 방식에서의 부인 방지 기능 절차`

      1. B는 A에게 개인키/공개키를 생성한 뒤 공개키를 공개하도록 요구한다.
      2. B는 A에게 '문서'를 개인키로 암호화할 것으로 요구한다.
      3. B는 이 '암호화된 문서'를 수령한다.
      4. B는 '암호화된 문서'를 A 의 공개키로 해독하여, 이 문서가 A 의 개인키로 제대로 암호화 되었음을 검증할 수 있다.
      5. 만약 해독되지 않는다면, 개인키-공개키 쌍이 맞지 않음을 의미한다. 공개한 공개키가 잘못되었거나, 다른 개인키로 암호화 했음을 뜻한다.
         → 이 '암호화된 문서'는 A 의 공개키로만 해독이 가능하므로, 이 '암호화된 문서'는 A 만이 발행할 수 있다는 증거가 된다. 또한, 변조되지 않았음도 동시에 증명할 수 있다.

  - 암호학적 문제를 해결 할 수 있다.

- 단점
  - 상대적으로 **키의 길이가 길다.**
  - **연산속도가 느리다.**
    - 대칭키 암호화 방식보다 약 1000배 느리다.

## 종류

- RSA
- 디피-헬만(Diffie-Hellman)
- 타원곡선암호(Elliptic Curve Cryptosystem, ECC)
- 전자서명(digital signature)

<hr/>

# 🌟 대칭키 vs 공개키 암호화 방식 혼합

- 공개키 방식은 연산 속도가 매우 느리기 때문에 대칭키와 혼합하여 사용하기도 한다.
- `하이브리드 방식` : 대칭키와 공개키 암호화 방식을 적절히 혼합하여 **대칭키를 주고 받을 때만 공개키 암호화 방식을 사용하고, 이후에는 계속 대칭키 암호화 방식으로 통신하는 방식이다.**
  - **이 하이브리드 방식은 SSL 탄생의 시초가 되었다.**
- 하이브리드 방식 구체적 과정

  - `step 1` : A가 B의 공개키로 암호화 통신에 사용할 대칭키를 암호화하고 B에게 보낸다.
  - `step 2` : B는 암호문을 받고, 자신의 비밀키로 복호화한다.
  - `step 3` : B는 A로부터 얻은 대칭키로 A에게 보낼 평문을 암호화하여 A에게 보낸다.
  - `step 4` : A는 자신의 대칭키로 암호문을 복호화한다.
  - `step 5` : 앞으로 이 대칭키로 암호화를 통신한다.

- 출처

  [http://wiki.hash.kr/index.php/대칭키](http://wiki.hash.kr/index.php/%EB%8C%80%EC%B9%AD%ED%82%A4)

  [http://wiki.hash.kr/index.php/비대칭키](http://wiki.hash.kr/index.php/%EB%B9%84%EB%8C%80%EC%B9%AD%ED%82%A4)

  [https://velog.io/@octo\_\_/대칭키와-공개키비대칭키](https://velog.io/@octo__/%EB%8C%80%EC%B9%AD%ED%82%A4%EC%99%80-%EA%B3%B5%EA%B0%9C%ED%82%A4%EB%B9%84%EB%8C%80%EC%B9%AD%ED%82%A4)
